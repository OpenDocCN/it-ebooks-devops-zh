# å…¶ä»–ğŸªœğŸ§±è½¯ä»¶ä½¿ç”¨æ•™ç¨‹

# å…¶ä»–ğŸªœğŸ§±è½¯ä»¶ã€æ–¹æ¡ˆæ•™ç¨‹

æœ¬æ•™ç¨‹ä¸»è¦å†…å®¹æ˜¯ è·¯ç”±å™¨åˆ· OpenWrtï¼Œå®‰è£… shadowsocks ğŸªœğŸ§±ã€‚æœ‰æ—¶ä¹Ÿè¦ç”¨ä¸€ä¸‹å…¶ä»–ğŸªœğŸ§±è½¯ä»¶ã€‚

* * *

#### æœ€ç®€å•çš„è·¯ç”±å™¨åˆ· OpenWrt å›ºä»¶ğŸªœğŸ§±æ•™ç¨‹:

[`github.com/softwaredownload/openwrt-fanqiang`](https://github.com/softwaredownload/openwrt-fanqiang "æœ€ç®€å•çš„è·¯ç”±å™¨åˆ· OpenWrt å›ºä»¶ğŸªœğŸ§±æ•™ç¨‹")

#### åœ¨çº¿é˜…è¯» OpenWrt ğŸªœğŸ§±è·¯ç”±å™¨æ•™ç¨‹:

[`www.gitbook.com/book/softwaredownload/openwrt-fanqiang/details`](https://www.gitbook.com/book/softwaredownload/openwrt-fanqiang/details)

# åˆ©ç”¨ lantern è“ç¯å®ç°æµè§ˆå™¨è‡ªåŠ¨ğŸªœğŸ§±æ•™ç¨‹

è“ç¯è¿ç”¨äº†å¤šç§æŠ€æœ¯ï¼Œé€šè¿‡è‡ªæœ‰æœåŠ¡å™¨æˆ–è€…è¿è¡Œ lantern çš„ç”¨æˆ·è½¬å‘æµé‡å®ç°æµè§ˆå™¨å…¨è‡ªåŠ¨ğŸªœğŸ§±ã€‚

## latern è“ç¯å’Œ OpenWrt shadowsocks ğŸªœğŸ§±çš„åŒºåˆ«

*   è“ç¯ä¸»è¦æ˜¯æµè§ˆå™¨è‡ªåŠ¨ğŸªœğŸ§±
*   [è·¯ç”±å™¨ OpenWrt shadowsocks ğŸªœğŸ§±æ–¹æ¡ˆ](https://github.com/softwaredownload/openwrt-fanqiang) æ˜¯æ‰€æœ‰æ¥å…¥çš„è®¾å¤‡éƒ½è‡ªåŠ¨ğŸªœğŸ§±,å¯å®šåˆ¶æ€§æ›´é«˜

## ä¸ºä»€ä¹ˆé€‰æ‹© lantern è“ç¯ğŸªœğŸ§±

æœ‰å¾ˆå¤šçš„ğŸªœğŸ§±è½¯ä»¶ï¼Œæœ‰é—­æºçš„ï¼Œä¹Ÿæœ‰å¼€æºçš„ï¼Œæˆ‘ä»¬ä¼˜å…ˆé€‰æ‹©å¼€æºè½¯ä»¶ã€‚é—­æºè½¯ä»¶ç¼ºå°‘å¤–ç•Œç›‘ç£ï¼Œä¸èƒ½ä¿è¯æ²¡æœ‰é—®é¢˜ã€‚

è“ç¯å°±æ˜¯ä¼˜ç§€çš„å¼€æºğŸªœğŸ§±è½¯ä»¶ã€‚ä»Šå¤©æ˜¯ 2016-01-10ï¼Œåœ¨ Github ä¸Šå·²ç» 6516 Star, 2228 Forkï¼Œå¼€å‘å¾ˆæ´»è·ƒã€‚

## ä¸‹è½½ lantern è“ç¯ğŸªœğŸ§±è½¯ä»¶

Github ä¸‹è½½ï¼š
[`github.com/getlantern/lantern`](https://github.com/getlantern/lantern)

ä¸»é¡µä¸‹è½½:
[`getlantern.org/`](https://getlantern.org/)

## è“ç¯ğŸªœğŸ§±è½¯ä»¶å®‰è£…å’Œè®¾ç½®

*   åœæ­¢è·¯ç”±å™¨çš„ shadowsocks ğŸªœğŸ§±
    ç™»å½• OpenWrt è·¯ç”±å™¨ï¼Œè¿è¡Œå‘½ä»¤:

    ```
     /etc/init.d/shadowsocks stop 
    ```

    å¦‚æœä½ æ˜¯æŒ‰ç…§ã€€[`github.com/softwaredownload/openwrt-fanqiang`](https://github.com/softwaredownload/openwrt-fanqiang) è®¾ç½®çš„ğŸªœğŸ§±ï¼Œé‚£ä¹ˆè¿˜å¾—æ£€æŸ¥ä¸€ä¸‹ [/etc/init.d/shadowsocks](https://github.com/softwaredownload/openwrt-fanqiang/blob/master/openwrt/default/etc/init.d/shadowsocks) é‡Œçš„ start, stop å‡½æ•°æ˜¯å¦æ­£ç¡®ã€‚2016-01-10 å‰è¿™ä¸¤ä¸ªå‡½æ•°æœ‰ bugï¼Œå¯¼è‡´æ‰§è¡Œ stop åä¸Šç½‘ä¸æ­£å¸¸ã€‚

*   æ‰“å¼€ [Chrome æµè§ˆå™¨](https://www.google.com/chrome/browser/desktop/)

*   å®‰è£…æˆ–è¿è¡Œ lantern è“ç¯ï¼Œä¼šè‡ªåŠ¨åœ¨ Chrome é‡Œæ‰“å¼€æ–°çš„é¡µé¢ï¼Œåœ°å€æ æ˜¾ç¤ºäº†ğŸªœğŸ§±è½¬å‘çš„åœ°å€å’Œç«¯å£ï¼Œæ¯”å¦‚ `http://127.0.0.1:16823/`
    ![](img/5.1.1.lantern-fanqiang-dizhi.png)

*   ç‚¹å‡»æ‰“å¼€é¡µé¢çš„å³ä¸‹è§’çš„é½¿è½®å›¾æ ‡è®¾ç½® lantern ğŸªœğŸ§±é…ç½®:
    ![](img/5.1.2.lantern-fanqiang-peizhi.png)

*   å³é”®ç‚¹å‡»ç”µè„‘å³ä¸‹è§’æ‰˜ç›˜å›¾æ ‡é€€å‡º lantern(Windows ä¸ºä¾‹)
    ![](img/5.1.3.lantern-fanqiang-tuichu.png)

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä¸€è¿è¡Œè“ç¯ï¼Œå°±å¯ä»¥ç‚¹å‡»è“ç¯æ–°æ‰“å¼€çš„é¡µé¢ä¸Šçš„ YouTube å›¾æ ‡çœ‹è§†é¢‘äº†ï¼Œéå¸¸æ–¹ä¾¿ã€‚

![](img/5.1.4.lantern-fanqiang-full.png)

## é…ç½®ç½‘ç»œè½¯ä»¶èµ° Lantern ğŸªœğŸ§±ä»£ç†:

è“ç¯é»˜è®¤ä¼šåœ¨ 127.0.0.1 ä¸Šå¼€å¯ä¸€ä¸ª HTTP ä»£ç†,ç«¯å£å·æ˜¯ 8787
åœ¨ç½‘ç»œè½¯ä»¶çš„ä»£ç†ç•Œé¢ä¸Šè®¾ç½® HTTP ä»£ç†:

```
åœ°å€: 127.0.0.1 
ç«¯å£å·: 8787 
```

ï¼ˆæ³¨ï¼šâ€œ127.0.0.1â€è¡¨ç¤ºâ€œæœ¬æœºåœ°å€â€ï¼‰

äºæ˜¯ï¼Œå¼€å¯ Lantern, Dropbox å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼š
![](img/5.1.5.lantern-fanqiang-dropbox.png)

## lantern è“ç¯ğŸªœğŸ§±è½¯ä»¶é…ç½®æ–‡ä»¶ç ”ç©¶

è¿›å…¥ lantern è“ç¯ğŸªœğŸ§±è½¯ä»¶å®‰è£…ç›®å½•ï¼š

### Windows ä¸‹è¿›å…¥ lantern å®‰è£…ç›®å½•

æŒ‰ Windows é”®ï¼Œè¾“å…¥
%appdata%

ç„¶åå°±å¯ä»¥è¿›å…¥ Lantern å®‰è£…ç›®å½•ã€‚

### Mac ä¸‹è¿›å…¥ lantern å®‰è£…ç›®å½•

```
/Users/name/Library/Application Support/Lantern 
```

### é…ç½®æ–‡ä»¶ï¼šLantern/lantern-2.0.10.yaml

2.0.10 æ˜¯ç‰ˆæœ¬å·ï¼Œéšä¸åŒç‰ˆæœ¬è€Œå˜åŒ–ã€‚

log æ–‡ä»¶ï¼Œå¯ä»¥äº†è§£ğŸªœğŸ§±è¯¦ç»†è¿‡ç¨‹ï¼š

```
Lantern/logs/lantern.log  

...  
geolookup.go:161 Successfully looked up IP '1.0.9.8' and country 'CN'  
... 
```

### Lantern é…ç½®æ–‡ä»¶ä¸­çš„æµé‡è½¬å‘æœåŠ¡å™¨ IP åœ°å€

Lantern/lantern-2.0.10.yaml ä¸­æ‰¾åˆ°ç±»ä¼¼å¦‚ä¸‹å†…å®¹ï¼Œæ›¿æ¢æˆå…¶ä»–æœåŠ¡å™¨ï¼ŒæŠŠæ–‡ä»¶è®¾ä¸ºåªè¯»ï¼Œå°±å¯ä»¥æ›´æ¢æœåŠ¡å™¨ï¼š

```
fallback-1.0.9.8:
  addr: 1.0.9.8:443
  pipelined: false
  cert: "-----BEGIN CERTIFICATE-----\n...\n-----END
    CERTIFICATE-----\n"
  authtoken: B... https://github.com/softwaredownload/openwrt-fanqiang ...C 
```

### Ubuntu ä¸‹è‡ªå·±ç¼–è¯‘ lantern ğŸªœğŸ§±è½¯ä»¶

å…ˆå‡†å¤‡å¥½ Go è¯­è¨€å¼€å‘ç¯å¢ƒï¼Œå‡è®¾ Go ç¨‹åºçš„æºç åœ¨ `~/golib/src` ç›®å½•ä¸‹ã€‚

```
sudo apt-get update
sudo apt-get install -y git curl libappindicator3-dev build-essential libgtk-3-dev

ï¼ƒ Use the Go compiler to build the lantern binary
cd ~/golib/src
git clone https://github.com/getlantern/lantern.git

cd lantern
source setenv.bash
go build -o lantern github.com/getlantern/flashlight

ï¼ƒ Use curl to test that the proxy is working fine:
curl -x 127.0.0.1:8787 https://www.google.com/humans.txt

ï¼ƒ This line will run Lantern without opening the browser window:
./lantern -headless 
```

### Reference:

*   [`github.com/getlantern/lantern`](https://github.com/getlantern/lantern)
*   [`getlantern.org`](https://getlantern.org)
*   [`github.com/getlantern/lantern/blob/393657edd298268b66ad0bf3184ad7b6f21da5c0/README.md`](https://github.com/getlantern/lantern/blob/393657edd298268b66ad0bf3184ad7b6f21da5c0/README.md)

# åŠ å¼ºğŸªœğŸ§±ä¸Šç½‘çš„åŒ¿åæ€§

# æ€æ ·åŠ å¼ºä¸Šç½‘çš„åŒ¿åæ€§

å³ä½¿ğŸªœğŸ§±ä¸Šç½‘äº†ï¼ŒçœŸå®çš„ä¸Šç½‘ä¿¡æ¯ï¼Œå¦‚æœ¬æœº IP åœ°å€ï¼Œç³»ç»Ÿè¯­è¨€,ç³»ç»Ÿæ—¶åŒºç­‰ç­‰è¿˜æ˜¯å¯èƒ½æš´éœ²ã€‚

## æ€æ ·æ£€æŸ¥ğŸªœğŸ§±åæµè§ˆå™¨ä¸Šç½‘çš„åŒ¿åæ€§

è®¿é—®ä¸‹é¢ç½‘ç«™æ£€æŸ¥è‡ªå·±çš„åŒ¿åç¨‹åº¦ï¼š

### [`whoer.net/#extended`](https://whoer.net/#extended)

## è“ç¯ğŸªœğŸ§±ï¼Œæµè§ˆå™¨åŒ¿åç¨‹åº¦æµ‹è¯•

ä¸‹å›¾ï¼Œè“ç¯ğŸªœğŸ§±ï¼ŒChrome æµè§ˆå™¨ï¼ŒåŒ¿åç¨‹åº¦ 40%ï¼Œå¾ˆå·®:
![](img/5.2.niming-chrome-lantern.png)

å†æ‹‰ä¸‹å»çœ‹ï¼ŒWebRTC æš´éœ²äº†æœ¬æœº IP åœ°å€ï¼š
![](img/5.2.niming-chrome-lantern-webrtc.png)

ä¸‹å›¾ï¼Œè“ç¯ğŸªœğŸ§±ï¼ŒFireFox æµè§ˆå™¨ï¼Œå¼€å¯éšç§è®¾ç½®å WeRTC å·²ç»å…³é—­ï¼ŒåŒ¿åç¨‹åº¦é«˜è¾¾ 90%ï¼š
![](img/5.2.niming-firefox-lantern.png)

## è·¯ç”±å™¨åˆ· OpenWrtï¼Œå®‰è£… shadowsocks-libev ğŸªœğŸ§±ï¼Œæµè§ˆå™¨åŒ¿åç¨‹åº¦æµ‹è¯•

ä¸‹å›¾ï¼ŒFireFox æµè§ˆå™¨ï¼ŒåŒæ ·è®¾ç½®ï¼ŒWeRTC å·²ç»å…³é—­ï¼ŒåŒ¿åç¨‹åº¦ 64%ï¼š
![](img/5.2.niming-firefox-openwrt-shadowsocks.png)

Chrome æµè§ˆå™¨ï¼ŒåŒ¿åç¨‹åº¦åªæœ‰ 30%äº†ï¼š
![](img/5.2.niming-chrome-openwrt-shadowsocks.png)

## é˜²æ­¢æµè§ˆå™¨ WebRTC æ³„éœ²æœ¬æœº IP åœ°å€:

### Chrome æµè§ˆå™¨å®‰è£…æ’ä»¶å°±å¯ä»¥äº†ï¼š WebRTC Leak Prevent

å®‰è£…ä»¥åï¼Œè·¯ç”±å™¨åˆ· OpenWrtï¼Œå®‰è£… shadowsocks-libev ğŸªœğŸ§±ï¼ŒChrome æµè§ˆå™¨çš„åŒ¿åç¨‹åº¦æå‡åˆ°äº† 64%

### FireFox æµè§ˆå™¨å…³é—­ WebRTC

åœ°å€æ è¾“å…¥ï¼š `about config`
æœç´¢ï¼š`media.peerconnection.enabled` åŒå‡»ç”± true æ”¹ä¸º falseï¼Œå°±å¯ä»¥å½»åº•åŒ¿åäº†ï¼

### Opera æµè§ˆå™¨å®‰è£…æ’ä»¶ï¼šWebRTC Leak Prevent

#### ä»€ä¹ˆæ˜¯ WebRTC What is WebRTC:

WebRTCï¼Œåç§°æºè‡ªç½‘é¡µå®æ—¶é€šä¿¡ï¼ˆWeb Real-Time Communicationï¼‰çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªæ”¯æŒç½‘é¡µæµè§ˆå™¨è¿›è¡Œå®æ—¶è¯­éŸ³å¯¹è¯æˆ–è§†é¢‘å¯¹è¯çš„æŠ€æœ¯ï¼Œæ˜¯è°·æ­Œ 2010 å¹´ä»¥ 6820 ä¸‡ç¾å…ƒæ”¶è´­ Global IP Solutions å…¬å¸è€Œè·å¾—çš„ä¸€é¡¹æŠ€æœ¯ã€‚

WebRTC å®ç°äº†åŸºäºç½‘é¡µçš„è§†é¢‘ä¼šè®®ï¼Œæ ‡å‡†æ˜¯ WHATWG åè®®ï¼Œç›®çš„æ˜¯é€šè¿‡æµè§ˆå™¨æä¾›ç®€å•çš„ javascript å°±å¯ä»¥è¾¾åˆ°å®æ—¶é€šè®¯ï¼ˆReal-Time Communications (RTC)ï¼‰èƒ½åŠ›ã€‚

WebRTCï¼ˆWeb Real-Time Communicationï¼‰é¡¹ç›®çš„æœ€ç»ˆç›®çš„ä¸»è¦æ˜¯è®© Web å¼€å‘è€…èƒ½å¤ŸåŸºäºæµè§ˆå™¨ï¼ˆChrome\FireFox...ï¼‰è½»æ˜“å¿«æ·å¼€å‘å‡ºä¸°å¯Œçš„å®æ—¶å¤šåª’ä½“åº”ç”¨ï¼Œè€Œæ— éœ€ä¸‹è½½å®‰è£…ä»»ä½•æ’ä»¶ï¼ŒWeb å¼€å‘è€…ä¹Ÿæ— éœ€å…³æ³¨å¤šåª’ä½“çš„æ•°å­—ä¿¡å·å¤„ç†è¿‡ç¨‹ï¼Œåªéœ€ç¼–å†™ç®€å•çš„ Javascript ç¨‹åºå³å¯å®ç°ï¼ŒW3C ç­‰ç»„ç»‡æ­£åœ¨åˆ¶å®š Javascript æ ‡å‡† APIï¼Œç›®å‰æ˜¯ WebRTC 1.0 ç‰ˆæœ¬ï¼ŒDraft çŠ¶æ€ï¼›å¦å¤– WebRTC è¿˜å¸Œæœ›èƒ½å¤Ÿå»ºç«‹ä¸€ä¸ªå¤šäº’è”ç½‘æµè§ˆå™¨é—´å¥å£®çš„å®æ—¶é€šä¿¡çš„å¹³å°ï¼Œå½¢æˆå¼€å‘è€…ä¸æµè§ˆå™¨å‚å•†è‰¯å¥½çš„ç”Ÿæ€ç¯å¢ƒã€‚åŒæ—¶ï¼ŒGoogle ä¹Ÿå¸Œæœ›å’Œè‡´åŠ›äºè®© WebRTC çš„æŠ€æœ¯æˆä¸º HTML5 æ ‡å‡†ä¹‹ä¸€ï¼Œå¯è§ Google å¸ƒå±€ä¹‹æ·±è¿œã€‚[1] WebRTC æä¾›äº†è§†é¢‘ä¼šè®®çš„æ ¸å¿ƒæŠ€æœ¯ï¼ŒåŒ…æ‹¬éŸ³è§†é¢‘çš„é‡‡é›†ã€ç¼–è§£ç ã€ç½‘ç»œä¼ è¾“ã€æ˜¾ç¤ºç­‰åŠŸèƒ½ï¼Œå¹¶ä¸”è¿˜æ”¯æŒè·¨å¹³å°ï¼šwindowsï¼Œlinuxï¼Œmacï¼Œandroidã€‚